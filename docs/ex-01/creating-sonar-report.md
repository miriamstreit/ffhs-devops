# Creating the sonar reports

## Prerequisites

> - Sonar Server is installed locally (using brew, for example)
> - sonar-scanner is installed locally (using brew, for example)

## Setting up SonarQube

Access the SonarQube server.

<img src="img/sonar-overview.png" alt="sonar overview"/>

Click the "Create Project" button in the top right corner and select "Local Project".

<img src="img/sonar-create-project.png" alt="sonar create project" width="200"/>

Fill out the form with the name of the project. The branch does not matter as we are scanning locally anyways.

<img src="img/sonar-create-local-project.png" alt="sonar create local project" width="300"/>

Select the "global settings" option in the next step.

<img src="img/sonar-create-project-settings.png" alt="sonar create project settings" />

Select the "Locally" analysis method.

<img src="img/sonar-analysis-method.png" alt="sonar analysis method" />

A token is needed to scan a project. We want a new token generated by Sonar. The name for the token is already prefilled and can be left as-is. Press "Generate" to continue.

<img src="img/sonar-analyze-token-name.png" alt="sonar analyze token name" />

Sonar will now display the token. Copy it and store it safely.

<img src="img/sonar-token-display.png" alt="sonar token display" />

Sonar will now ask what the project setup looks like. We have two projects, so we would need to repeat the above process once. One of our projects is a Maven project which means we can select "Maven" and use the shown command and run it in our project directory without having to make adjustments to the project.

<img src="img/sonar-run-command-backend.png" alt="sonar run command (backend)" />

While the backend scan will just work with Maven, our frontend project relies on the `sonar-scanner` being installed locally. Just navigate to the project directory and use the shown command. There's no need to modify the project.

<img src="img/sonar-run-command-frontend.png" alt="sonar run command (frontend)" />

Check Sonar again and navigate to the home page. Both projects should now show up and you can look through the reports (also shown below).

## Reports

### Frontend

<img src="sonar-report/frontend.png" alt="sonar frontend report"/>

### Backend

<img src="sonar-report/backend.png" alt="sonar backend report"/>

### JSON report

The full report as a JSON file can be found within the folder `sonar-report`. To get the report in this format navigate to http://localhost:9000/api/issues/search.
